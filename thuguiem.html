<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="./styles.css" />
    <title>Có thư nè bé ưi😚</title>
  </head>
  <body>
    <canvas
      id="c"
      width="window.innerWidth"
      height="window.innerHeight"
    ></canvas>
    <div class="envelope-container">
      <div class="envelope">
        <div class="envelope__tab"></div>
        <div class="envelope__letter">
          <p style="text-align: justify">
            &nbsp;&nbsp;"Giữa thế giới bao la anh chẳng thấy ai xinh hơn em,
            lung linh như đóa hoa sáng ngời. Viết đôi ba câu ca nghĩ về em tương
            tư thâu đêm khi em đánh rơi nụ cười." <br />&nbsp;&nbsp;Chào em,
            bông hoa đáng eo của anh😻. Anh gửi thư này cho em không phải vì có
            chuyện gì quá to tát, mà chỉ đơn giản là… anh yêu em😘. Điều đầu
            tiên anh muốn nói là embe phải luôn hạnh phúc, xinh đẹp, vui vẻ, tự
            tin em nhá🥰. Anh biết cuộc sống đôi khi bận rộn đến mức không có
            nhìu thời gian, mệt mỏi, áp lực,😔… nhưng em vẫn luôn dành những
            điều đẹp đẽ nhất cho anh🌷. Nhiều lúc anh làm em buồn, em khóc😭,
            lại hay kím chiện với em èo anh ghen tí thôi,… anh xin lỗi nhá, xin
            lỗi em nhiều lắm😓. Anh cũng cảm ơn em vì đã đến bên anh, vì đã chia
            sẻ những khoảnh khắc vui buồn, vì đã chịu đựng sự ngốc nghếch của
            anh😍. <br />&nbsp;&nbsp;❤️‍🔥❣️💕💞 Nam yêu Vy nhiều lắm 💓💗💖💘💝
          </p>
        </div>
        <div class="envelope--base"></div>
      </div>
    </div>

    <div class="truck-container">
      <div class="container">
        <div class="ts">
          <div class="box"></div>
          <div class="front">
            <div class="light"></div>
            <div class="trapezoid"></div>
            <div class="pipe"></div>
            <div class="pipe2"></div>
            <img class="img1" src="https://i.gifer.com/5zoP.gif" />
            <img class="img2" src="https://i.gifer.com/5zoP.gif" />
            <img class="img3" src="https://i.gifer.com/5zoP.gif" />
            <img class="img4" src="https://i.gifer.com/5zoP.gif" />
            <img class="img5" src="https://i.gifer.com/5zoP.gif" />
            <img class="img6" src="https://i.gifer.com/5zoP.gif" />
            <img class="img7" src="https://i.gifer.com/5zoP.gif" />
            <img class="img8" src="https://i.gifer.com/5zoP.gif" />
            <img class="img9" src="https://i.gifer.com/5zoP.gif" />
            <img class="img10" src="https://i.gifer.com/5zoP.gif" />
            <img class="img11" src="https://i.gifer.com/5zoP.gif" />
            <div class="front1"></div>
            <div class="front2"></div>
            <div class="window"></div>
            <div class="hood"></div>
          </div>
          <div class="tyre1">
            <div class="r1"></div>
            <div class="r2"></div>
            <div class="r3"></div>
            <div class="r4"></div>
            <div class="r5"></div>
            <div class="r6"></div>
          </div>
          <div class="tyre2">
            <div class="r1"></div>
            <div class="r2"></div>
            <div class="r3"></div>
            <div class="r4"></div>
            <div class="r5"></div>
            <div class="r6"></div>
          </div>
          <div class="tyre3">
            <div class="r1"></div>
            <div class="r2"></div>
            <div class="r3"></div>
            <div class="r4"></div>
            <div class="r5"></div>
            <div class="r6"></div>
          </div>
          <div class="tyre4">
            <div class="r1"></div>
            <div class="r2"></div>
            <div class="r3"></div>
            <div class="r4"></div>
            <div class="r5"></div>
            <div class="r6"></div>
          </div>
        </div>
      </div>
    </div>

    <!-- Thêm thẻ audio -->
    <audio id="background-music" loop>
      <source src="./mp3/TungNgayYeuEm.mp3" type="audio/mpeg" />
      Trình duyệt của bạn không hỗ trợ thẻ audio.
    </audio>

    <script>
      if (!sessionStorage.getItem("authenticated")) {
        alert("Người đẹp phải nhập mật khẩu nha😎");
        window.location.href = "index.html";
      }
      // Heart animation effect
      var c = document.getElementById("c");
      var ctx = c.getContext("2d");
      var cw = (c.width = window.innerWidth),
        ch = (c.height = window.innerHeight);
      var rad = Math.PI / 180;
      var howMany = 100;
      var Circles = [];
      ctx.strokeStyle = "red";
      ctx.fillStyle = "rgba(255, 234, 234, 0.59)";
      ctx.globalAlpha = 0.75;

      function Circle() {
        this.R = randomIntFromInterval(50, 200);
        this.X = randomIntFromInterval(this.R, cw - this.R);
        this.Y = randomIntFromInterval(this.R, ch - this.R);
        this.iX = 2 * Math.random() * (Math.random() < 0.5 ? -1 : 1);
        this.iY = 2 * Math.random() * (Math.random() < 0.5 ? -1 : 1);
        this.r = randomIntFromInterval(5, 50);
        this.r1 = randomIntFromInterval(this.R / 2, this.R);
        this.a = ~~(Math.random() * 360) + 1;
        this.x = this.X + this.r1 * Math.cos(this.a * rad);
        this.y = this.Y + this.r1 * Math.sin(this.a * rad);
        this.l = randomIntFromInterval(50, 80);
      }

      for (var i = 0; i < howMany; i++) {
        var circle = new Circle();
        Circles.push(circle);
      }

      function Draw() {
        ctx.fillRect(0, 0, cw, ch);
        for (var i = 0; i < Circles.length; i++) {
          var p = Circles[i];
          if (p.X < p.R || p.X > cw - p.R || p.Y < p.R || p.Y > ch - p.R) {
            p.iX *= -1;
            p.iY *= -1;
          }
          p.X += p.iX;
          p.Y += p.iY;
          p.a += 1;
          p.x = p.X + p.r1 * Math.cos(p.a * rad);
          p.y = p.Y + p.r1 * Math.sin(p.a * rad);
          p.gx = p.x + p.r * Math.cos(p.a * rad);
          p.gy = p.y + p.r * Math.sin(p.a * rad);
          ctx.save();
          ctx.fillStyle = Grd(p.gx, p.gy, p.r, p.l);
          heart(p.x, p.y, p.r, p.a);
          ctx.restore();
        }
        requestId = window.requestAnimationFrame(Draw);
      }

      function randomIntFromInterval(mn, mx) {
        return ~~(Math.random() * (mx - mn + 1) + mn);
      }

      function Grd(x, y, r, l) {
        grd = ctx.createRadialGradient(x, y, 0, x, y, r);
        grd.addColorStop(0, "hsla(0, 99%," + l + "%,.9)");
        grd.addColorStop(1, "hsla(0, 99%," + l + "%, 0.1)");
        return grd;
      }

      function heart(x, y, r, a) {
        ctx.beginPath();
        var x1 = x + r * Math.cos(a * rad);
        var y1 = y + r * Math.sin(a * rad);
        var cx1 = x + r * Math.cos((a + 22.5) * rad);
        var cy1 = y + r * Math.sin((a + 22.5) * rad);
        var cx2 = x + r * Math.cos((a - 22.5) * rad);
        var cy2 = y + r * Math.sin((a - 22.5) * rad);
        var chord = 2 * r * Math.sin((22.5 * rad) / 2);
        ctx.moveTo(x1, y1);
        ctx.arc(cx1, cy1, chord, (270 + a) * rad, (270 + a + 225) * rad);
        ctx.lineTo(x, y);
        ctx.moveTo(x1, y1);
        ctx.arc(cx2, cy2, chord, (90 + a) * rad, (90 + a + 135) * rad, true);
        ctx.lineTo(x, y);
        ctx.fill();
      }

      window.addEventListener(
        "click",
        function () {
          const music = document.getElementById("background-music");
          music.play().catch((error) => {
            console.log("Error playing music:", error);
          });
        },
        false
      );

      window.addEventListener("load", Draw, false);
    </script>
  </body>
</html>
